<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://use.typekit.net/mev6qqe.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="bg"></div>
    <div id="form">
        <h1 id="currentPageTitle">Create An Event</h1>
        <div class="formBox">
            <h4>Autofill with AI</h4>
            <button id="button" class="uploadFileButton">Upload File</button>
            <h5>(Upload a picture of the event on the community bulletin board)</h5>
            <form id="eventForm">
                <label for="eventTitle">Event Title *</label><br>
                <textarea name="title" id="eventTitle" required></textarea><br>
                <label for="Description">Event Description *</label><br>
                <textarea name="description" id="Description" required></textarea><br>
                <label for="Date">Date *</label><br>
                <input type="date" name="date" id="Date" required>
                <label for="Time" class="timeLabel">Time *</label></br>
                <input type="time" name="time" id="Time" required>
                <label for="Location" class="locationLabel">Location *</label><br>
                <textarea name="location" id="Location" required></textarea><br>
                <label for="Age" class="ageRange">Age Range *</label><br>
                <select name="age" id="Age">
                    <option value="1"></option>
                    <option value="2">age 5-10</option>
                    <option value="3">age 10-15</option>
                    <option value="4">age 15-18</option>
                    <option value="5">age 18-30</option>
                </select><br><br>
                <label for="Category">Category *</label><br>
                <select name="category" id="Category">
                    <option value="0"></option>
                    <option value="1">Category 1</option>
                    <option value="2">Category 2</option>
                    <option value="3">Category 3</option>
                    <option value="4">Category 4</option>
                </select><br>
                <button type="submit" id="button" class="createEvent">Create Event</button>
            </form>
        </div>
    </div>
    <script>
        document.getElementById("eventForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const formObject = {};
            formData.forEach((value, key) => { formObject[key] = value; });
            const response = await fetch("/events/eventForm", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(formObject),
            });
            const result = await response.json();
            if (result.success) {
                console.log("Event created successfully:", result.data);
                window.location.href = "/events";
            } else {
                console.error("Error creating event:", result.error);
            }
        });
    </script>
</body>
</html>
